<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì¤‘êµ­ì–´ ìŠ¤ë„ì¿  ì±„ì ê¸°</title>
  <style>
    table { border-collapse: collapse; margin: 20px auto; }
    td {
  width: 80px;
  height: 80px;
  text-align: center;
  border: 1px solid #333;
  font-size: 12px;
  overflow: hidden;
}

select {
  width: 100%;
  height: 100%;
  font-size: 12px;
  border: none;
  text-align-last: center;
  background-color: white;
}
    }
    td:nth-child(3n) { border-right: 3px solid #000; }
    tr:nth-child(3n) td { border-bottom: 3px solid #000; }
    #checkBtn {
      display: block; margin: 20px auto;
      font-size: 16px; padding: 10px 20px;
    }
    .correct { background-color: #ccffcc; }
    .incorrect { background-color: #ffcccc; }
    #chartContainer {
      width: 300px;
      margin: 20px auto;
    }
  </style>
</head>
<body>

<h1 style="text-align: center;">ğŸ¯ ì¤‘êµ­ì–´ ë‹¨ì–´ ìŠ¤ë„ì¿  ì±„ì ê¸°</h1>
<table id="sudoku"></table>
<button id="checkBtn">ì±„ì í•˜ê¸°</button>

<div id="chartContainer">
  <canvas id="scoreChart" width="300" height="300"></canvas>
</div>

<script>
const words = [
  "xÇhuan", "chÃ nggÄ“", "nÃ ", "huÃ¬", "tÃ¡n", "gÄngqÃ­n", "dÄngrÃ¡n", "xiÇng", "dÄng"
];

const initialBoard = [
  ["xÇhuan", "", "nÃ ", "xiÇng", "", "", "", "", ""],
  ["", "huÃ¬", "", "", "gÄngqÃ­n", "", "", "", "dÄngrÃ¡n"],
  ["", "", "dÄngrÃ¡n", "tÃ¡n", "", "dÄng", "", "", ""],
  ["chÃ nggÄ“", "", "", "", "", "tÃ¡n", "", "", ""],
  ["gÄngqÃ­n", "", "", "chÃ nggÄ“", "xiÇng", "", "", "", ""],
  ["", "", "xÇhuan", "", "huÃ¬", "", "", "tÃ¡n", ""],
  ["huÃ¬", "", "", "", "", "", "", "dÄngrÃ¡n", ""],
  ["", "", "tÃ¡n", "", "dÄng", "", "", "", "nÃ "],
  ["xiÇng", "", "", "", "", "chÃ nggÄ“", "huÃ¬", "", ""]
];

const answerBoard = [
  ["xÇhuan", "dÄng", "nÃ ", "xiÇng", "chÃ nggÄ“", "huÃ¬", "dÄngrÃ¡n", "gÄngqÃ­n", "tÃ¡n"],
  ["tÃ¡n", "huÃ¬", "chÃ nggÄ“", "dÄngrÃ¡n", "gÄngqÃ­n", "nÃ ", "xiÇng", "xÇhuan", "dÄng"],
  ["gÄngqÃ­n", "xiÇng", "dÄngrÃ¡n", "tÃ¡n", "xÇhuan", "dÄng", "huÃ¬", "nÃ ", "chÃ nggÄ“"],
  ["chÃ nggÄ“", "xiÇng", "huÃ¬", "dÄng", "nÃ ", "tÃ¡n", "gÄngqÃ­n", "dÄngrÃ¡n", "xÇhuan"],
  ["gÄngqÃ­n", "dÄngrÃ¡n", "tÃ¡n", "chÃ nggÄ“", "xiÇng", "xÇhuan", "nÃ ", "huÃ¬", "dÄng"],
  ["nÃ ", "dÄng", "xÇhuan", "gÄngqÃ­n", "huÃ¬", "dÄngrÃ¡n", "chÃ nggÄ“", "tÃ¡n", "xiÇng"],
  ["huÃ¬", "chÃ nggÄ“", "xiÇng", "nÃ ", "dÄng", "gÄngqÃ­n", "xÇhuan", "dÄngrÃ¡n", "tÃ¡n"],
  ["dÄngrÃ¡n", "gÄngqÃ­n", "tÃ¡n", "huÃ¬", "dÄng", "xÇhuan", "chÃ nggÄ“", "xiÇng", "nÃ "],
  ["xiÇng", "nÃ ", "dÄng", "dÄngrÃ¡n", "tÃ¡n", "chÃ nggÄ“", "huÃ¬", "gÄngqÃ­n", "xÇhuan"]
];

// í…Œì´ë¸” ìƒì„±
const sudoku = document.getElementById("sudoku");

for (let i = 0; i < 9; i++) {
  const tr = document.createElement("tr");
  for (let j = 0; j < 9; j++) {
    const td = document.createElement("td");
    td.dataset.row = i;
    td.dataset.col = j;
    const value = initialBoard[i][j];
    if (value !== "") {
      td.textContent = value;
      td.style.backgroundColor = "#eee";
    } else {
      const select = document.createElement("select");
      const blank = document.createElement("option");
      blank.value = "";
      blank.text = "";
      select.appendChild(blank);
      words.forEach(w => {
        const opt = document.createElement("option");
        opt.value = w;
        opt.text = w;
        select.appendChild(opt);
      });
      td.appendChild(select);
    }
    tr.appendChild(td);
  }
  sudoku.appendChild(tr);
}

// ì±„ì  ê¸°ëŠ¥
document.getElementById("checkBtn").addEventListener("click", () => {
  let correct = 0;
  let total = 0;

  document.querySelectorAll("#sudoku td").forEach(td => {
    const row = parseInt(td.dataset.row);
    const col = parseInt(td.dataset.col);
    const answer = answerBoard[row][col];
    const isFixed = initialBoard[row][col] !== "";

    if (!isFixed) {
      const select = td.querySelector("select");
      const userAnswer = select.value;
      total++;

      td.classList.remove("correct", "incorrect");

      if (userAnswer === answer) {
        td.classList.add("correct");
        correct++;
      } else {
        td.classList.add("incorrect");
      }
    }
  });

  const score = total > 0 ? Math.round((correct / total) * 100) : 0;
  alert(`ë§ì€ ê°œìˆ˜: ${correct} / ${total}\nì ìˆ˜: ${score}ì `);

  drawChart(correct, total - correct);
});

// ì ìˆ˜ ê·¸ë˜í”„
function drawChart(correct, incorrect) {
  const canvas = document.getElementById("scoreChart");
  const ctx = canvas.getContext("2d");
  const total = correct + incorrect;
  const correctAngle = (correct / total) * 2 * Math.PI;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // ì „ì²´ ë°°ê²½ (ì˜¤ë‹µ)
  ctx.beginPath();
  ctx.fillStyle = "#ddd";
  ctx.moveTo(150, 150);
  ctx.arc(150, 150, 100, 0, 2 * Math.PI);
  ctx.fill();

  // ì •ë‹µ ì˜ì—­
  ctx.beginPath();
  ctx.fillStyle = "#66cc66";
  ctx.moveTo(150, 150);
  ctx.arc(150, 150, 100, -0.5 * Math.PI, -0.5 * Math.PI + correctAngle);
  ctx.fill();

  ctx.fillStyle = "#000";
  ctx.font = "20px sans-serif";
  ctx.textAlign = "center";
  ctx.fillText(`ì •ë‹µ: ${correct}`, 150, 145);
  ctx.fillText(`ì˜¤ë‹µ: ${incorrect}`, 150, 170);
}
</script>

</body>
</html>
